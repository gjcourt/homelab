apiVersion: v1
kind: ConfigMap
metadata:
  name: snapserver-config
  namespace: snapcast
  labels:
    app: snapcast
data:
  snapserver.conf: |
    [stream]
    # Default stream: write raw PCM to /tmp/snapfifo (inside the pod).
    # Sample format: 48kHz, 16-bit, stereo. Codec: FLAC.
    source = pipe:///tmp/snapfifo?name=default&sampleformat=48000:16:2&codec=flac

    # Spotify Connect (go-librespot sidecar)
    # The sidecar writes raw PCM into this FIFO, snapserver reads it.
    # Sample format matches Snapcast's librespot/go-librespot expectations (44.1kHz).
    source = pipe:///audio/spotify.fifo?name=spotify&sampleformat=44100:16:2&codec=flac&mode=read

    [http]
    # Serve Snapweb (built-in UI) via the snapserver http port (1780)
    doc_root = /usr/share/snapserver/snapweb/
