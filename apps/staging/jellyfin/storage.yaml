# Staging storage - patches base storage with staging-specific sizes
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: jellyfin-config-pvc
  namespace: jellyfin
  labels:
    app: jellyfin
    env: staging
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      # Actual usage: ~220Mi; target = 20% headroom → 512Mi.
      # Requires PVC deletion to take effect (PVCs cannot shrink in-place).
      storage: 512Mi
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: jellyfin-cache-pvc
  namespace: jellyfin
  labels:
    app: jellyfin
    env: staging
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      # Actual usage: ~14Mi; this is a pure cache - safe to recreate.
      # Target = 20% headroom → 256Mi (was 10Gi, massively over-provisioned).
      # Requires PVC deletion to take effect.
      storage: 256Mi
